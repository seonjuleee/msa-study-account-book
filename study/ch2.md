# 2. 스프링 클라우드와 함께 마이크로서비스 세계 탐험

### 2.1 스프링 클라우드란?

- Spring Cloud Config : 애플리케이션 구성 데이터를 관리. Git, Consul, Eureka와 통합됨
- Spring Cloud Service Discovery : 클라이언트에서 서버가 배포된 물리적 위치(IP 및 서버 이름)를 추상화. Consul, Zookeeper, Eureka 서비스를 사용해 구현 가능
- Spring Cloud Loadbalancer와 Resilience4j : 서비스 클라이언트 회복성 패턴(회로 차단기, 재시도, 벌크헤드 등)을 빠르게 구현 가능
- Spring Cloud API Gateway : 마이크로서비스 애플리케이션을 위한 서비스 라우팅 기능 제공. Spring Cloud Gateway 서비스로 구현 가능
- Spring Cloud Stream : 경량 메시지 처리 기능을 마이크로서비스에 쉽게 통합하는 기술. 비동기 이벤트를 사용하는 지능형 마이크로서비스 구축 가능. RabbitMQ, Kafka 같은 메시지 브로커와 빠르게 통합 가능
- Spring Cloud Sleuth : 고유 추적 식별자를 애플리케이션에서 사용되는 HTTP 호출 및 메시지 채널(RabbitMQ, Kafka)에 통합. 로깅 집계 기술 도구(ELK)와 추적 도구(Zipkin)와 결합하여 사용.
- Spring Cloud Security : 인증 및 인가(권한 부여) 프레임워크. 토큰을 기반으로 사용자 검증. JWT 지원

### 2.3 클라우드 네이티브 마이크로서비스 구축 방법

- 클라우드 네이티브 애플리케이션 : **컨테이너**처럼 확장 가능한 컴포넌트로 구축되고 **마이크로서비스**로 배포되며, **지속적 전달(CD)** 워크플로가 있는 **데브옵스** 프로세스를 이용하여 가상 인프라스트럭처에서 관리되는 애플리케이션.
    - Heroku의 모범 사례 지침
        1. 소스 제어 가능한 단일 **코드베이스**
        2. 자바용 빌드 도구(Maven, Gradle)로 사용되는 **의존성** 선언
        3. **구성 정보**를 서비스를 분리해서 관리
        4. 애플리케이션 배포 시 코드 변경 없이 local connection을 third-party로 교체 가능한 **백엔드 서비스**
        5. 분리된 배포 단계(**빌드, 릴리즈, 실행 단계**)
        6. 마이크로서비스는 항상 **stateless**(세션 데이터를 서버에 저장하지 않고 SQL나 NoSQL DB에 저장)이며, 요청받은 트랜잭션 수행 정보만 포함되어야 함.
        7. HTTP 특정 포트로 서비스를 게시하는 **포트 바인딩**
        8. 확장 시 더 많은 인스턴스를 추가해 **수평확장** 시키기(동시성)
        9. **disposable(폐기 가능)** 하고 탄력적으로 확장하거나 시작, 중지할 수 있음
        10. 내부 메커니즘에 관여하지 않고 **로그**를 기록할 수 있음. Logstash나 Fluentd 도구로 관리
        11. **서비스 관리 작업** 진행